self.addEventListener("push",(function(t){console.log("Received push event:",t);const{title:i,body:n,url:e}=JSON.parse(t.data.text());if(t.data){const o={body:n,icon:"/icon.png",vibrate:[100,50,100],data:{url:e,dateOfArrival:Date.now(),primaryKey:"2"}};t.waitUntil(self.registration.showNotification(i,o))}})),self.addEventListener("notificationclick",(async t=>{t.notification.close();const i=t.notification.data.url||"/";t.waitUntil(clients.matchAll({type:"window"}).then((t=>{for(const n of t)if(n.url===i&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow(i)})))}));